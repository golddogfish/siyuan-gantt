# 甘特图挂件

<p align="center">
  <img src="icon.png" width="128" height="128" alt="甘特图图标">
</p>

思源笔记的甘特图可视化挂件，用于从数据库视图展示项目时间线。

> 🤖 **本挂件完全由 AI 辅助设计和开发。**
>
> 📦 **基于 [FullCalendar](https://fullcalendar.io/) 开源项目。**

## 功能特性

- ✅ 从思源数据库视图读取项目数据
- ✅ 周视图和月视图切换
- ✅ 今日标记线（红色）及日期表头高亮
- ✅ 周末背景高亮
- ✅ 拖拽调整项目时间（仅限水平方向）
- ✅ 右键点击甘特条直接修改状态
- ✅ 状态颜色自定义
- ✅ 屏蔽指定状态
- ✅ 配置自动保存
- ✅ 状态列表过长时右键菜单支持滚动

## 系统要求

- **思源笔记**: v2.10.0 或更高版本（需要稳定的数据库 API 支持）

## 使用方法

### 1. 准备数据库

在思源笔记中创建一个数据库，包含以下列：

- **项目名称/项目内容/标题**：项目的名称
- **状态**：项目状态（单选类型）
- **开始日/开始时间**：项目开始日期
- **截止日/截止时间**：项目截止日期

### 2. 插入挂件

在思源笔记中插入挂件，选择"甘特图"。

### 3. 配置挂件

点击右上角的 ⚙️ 按钮：

1. **输入数据库ID**：输入你的数据库块ID
2. **选择屏蔽状态**：勾选不想显示的状态
3. **自定义颜色**：为每个状态选择颜色
4. 点击"保存并刷新"

### 4. 查看甘特图

- 使用工具栏切换周视图/月视图
- 拖拽色块调整项目时间
- 滚动查看更多项目

## 配置说明

挂件配置会自动保存在 `/data/widgets/siyuan-gantt/gantt-config-{挂件ID}.json` 文件中。

## 更新日志

### v1.2.0 (2025-12-16)

- ✨ 新增：右键点击甘特条可直接修改状态
- ✨ 新增：今日日期表头底部红线高亮
- 🔧 修复：项目名称现在会正确移除末尾标签（如 `#1#`）
- 🔧 修复：日期范围显示现在覆盖完整的截止日
- 🔧 修复：状态列表过长时右键菜单可滚动
- 🎯 变更：拖拽限制为仅水平方向（不能切换行）
- 🎯 变更：隐藏今日指示线的小三角箭头

### v1.1.0 (2025-12-16)

- 🔧 修复：关闭窗口后数据库ID现在会正确保存和恢复
- 🎯 默认视图改为周视图
- 📍 打开月视图时自动将今天滚动到屏幕中央
- 🎨 更新默认配色方案（14种鲜艳颜色）
- ✨ 优化甘特条与左侧文字的垂直对齐
- 🔄 修复左右滚动同步问题
- ⚡ 优化滚动性能，减少视图切换时的卡顿

### v1.0.0 (2025-12-14)

- 初始版本发布
- 支持从数据库视图读取数据
- 支持周视图和月视图
- 支持状态颜色自定义
- 支持屏蔽指定状态

## 许可证

MIT License

## 作者

goldfish
